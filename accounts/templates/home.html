{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cycle.in - Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

  <style>
    body {background-color: #fff;}
    header, .navbar, footer {background-color: #ffeb3b;}
    .product-card {border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);}
    .btn-yellow {background-color: #ffeb3b; color: #000; border:none;}
    .btn-yellow:hover {background-color:#fdd835;}
    .reviews-scroll {display:flex; overflow-x:auto; gap:1rem; scroll-behavior:smooth;}
    .reviews-scroll::-webkit-scrollbar {display:none;}
    .footer-section {padding:2rem; background:#f9f9f9;}
   @media (max-width: 576px) {
  .navbar .form-control {
    font-size: 14px;
  }
  .navbar .btn {
    font-size: 14px;
    padding: 4px 8px;
  }
}

.category-img {
  width: 100px;
  height: 100px;
  object-fit: cover;
  border-radius: 50%;
  border: 2px solid #ddd;
  transition: transform 0.2s;
}
.category-img:hover {
  transform: scale(1.05);
  border-color: #ffeb3b;
}

/* Base animation style */
.scroll-animate {
  opacity: 0;
  transition: all 0.8s ease-out;
}

/* Left to right */
.scroll-left {
  transform: translateX(-60px);
}
.scroll-left.show {
  opacity: 1;
  transform: translateX(0);
}

/* Right to left */
.scroll-right {
  transform: translateX(60px);
}
.scroll-right.show {
  opacity: 1;
  transform: translateX(0);
}

/* --- Responsive Fix --- */
@media (max-width: 576px) {
  .scroll-left,
  .scroll-right {
    transform: translateY(40px);   /* move up/down instead of side */
  }
  .scroll-left.show,
  .scroll-right.show {
    transform: translateY(0);
  }
}

/* Loading overlay */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255,255,255,0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      display: none; /* hidden by default */
    }

  </style>

{% block style %}{% endblock style %}
</head>
<body>

<div class="loading-overlay" id="loadingOverlay">
  <div class="spinner-border text-warning" style="width: 4rem; height: 4rem;" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>


<nav class="navbar navbar-expand-lg navbar-light" style="background-color: #ffeb3b;">
  <div class="container-fluid">

    <!-- Logo -->
    <a class="navbar-brand d-flex align-items-center loading-btn" href="{% url 'dashboard' %}">
      <img src="{% static 'logo.png' %}" alt="Logo" style="height:40px;">
    </a>

    <!-- Mobile toggle button -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar"
      aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="mainNavbar">

      <!-- Centered search (takes all available space) -->
      <form class="d-flex flex-grow-1 mx-lg-3 my-2 my-lg-0">
        <input class="form-control me-2" type="search" placeholder="Search products..." aria-label="Search">
        <button class="btn btn-yellow" type="submit">Search</button>
      </form>

      <!-- Right buttons -->
      <div class="d-flex align-items-center flex-wrap gap-2 my-2 my-lg-0">
        
        <a class="btn btn-sm btn-yellow loading-btn" href="{% url 'profile' %}" title="Account">
          <i class="bi bi-person-circle"></i>
        </a>
        <a class="btn btn-sm btn-yellow loading-btn" href="{% url 'cart' %}" title="Cart">
          <i class="bi bi-cart"></i>
        </a>
        <a class="btn btn-sm btn-yellow loading-btn" href="{% url 'favourites' %}" title="Favourites">
          <i class="bi bi-heart"></i>
        </a>
        {% if user.is_authenticated %}
          <a href="{% url 'logout' %}" class="btn btn-sm btn-yellow d-flex align-items-center loading-btn" title="Logout">
            <i class="bi bi-box-arrow-right"></i> <!-- logout icon -->
          </a>
        {% else %}
          <a class="btn btn-sm btn-yellow loading-btn" href="{% url 'login' %}">Login</a>
        {% endif %}
      </div>

    </div>
  </div>
</nav>

{% block content %}{% endblock %}



<!-- FOOTER -->
<footer>
  <div class="footer-section">
    <div class="row">
      <div class="col-md-3">
        <h5>About Us</h5>
        <p>We provide the best cycles and accessories online.</p>
      </div>
      <div class="col-md-3">
        <h5>Policies</h5>
        <ul class="list-unstyled">
          <li><a href="#">Return Policy</a></li>
          <li><a href="#">Shipping Policy</a></li>
          <li><a href="#">Privacy Policy</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Quick Links</h5>
        <ul class="list-unstyled">
          <li><a href="#">Contact Us</a></li>
          <li><a href="#">FAQs</a></li>
          <li><a href="#">Brands</a></li>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Newsletter</h5>
        <form>
          <input type="email" class="form-control mb-2" placeholder="Enter email">
          <button class="btn btn-yellow btn-sm">Subscribe</button>
        </form>
      </div>
    </div>
  </div>
  <div class="text-center py-3" style="background:#ffeb3b;">
    Â©2025 cycle.in
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const elements = document.querySelectorAll(".scroll-animate");

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add("show");   // fade in when visible
        } else {
          entry.target.classList.remove("show"); // fade out when leaving
        }
      });
    }, { threshold: 0.2 });

    elements.forEach(el => observer.observe(el));
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const overlay = document.getElementById("loadingOverlay");

    // For all forms
    document.querySelectorAll("form").forEach(form => {
      form.addEventListener("submit", function (e) {
        e.preventDefault();
        overlay.style.display = "flex";
        setTimeout(() => form.submit(), 1000); // delay 1s
      });
    });

    // For all buttons/links with class="loading-btn"
    document.querySelectorAll(".loading-btn").forEach(btn => {
      btn.addEventListener("click", function (e) {
        overlay.style.display = "flex";
        // small delay so animation is visible before navigation
        setTimeout(() => {
          if (btn.tagName === "A" && btn.href) {
            window.location.href = btn.href;
          }
        }, 2000);
      });
    });
  });
</script>




</body>
</html>
